# Feature: Busy Dad Burpee Timer

## 1. Summary
A specialized 20-minute workout timer designed for "The Busy Dad Training" methodology. The app calculates specific rep pacing and rest intervals based on a user's target total reps and set structure within a fixed 20-minute window. It uses a "metronome" visualizer (smooth fill up/down) to guide rep cadence.

## 2. User Stories
- **US1:** As a user, I want to input my total target reps (e.g., 200) and set size (e.g., 10) so the app can calculate the workout structure.
- **US2:** As a user, I want the total workout to always be exactly 20 minutes, with the app automatically adjusting rep speed and rest times to fit this constraint.
- **US3:** As a user, I want to define a "Work-to-Rest" ratio (or Intensity) to balance how fast I move vs. how long I rest.
- **US4:** As a user, I want a visual "metronome" bar that fills up (Rep 1) and moves down (Rep 2) smoothly to keep me on pace.
- **US5:** As a user, I want clear visual cues (Green screen) for rest periods and a flashing alert when the next set is about to start.
- **US6:** As a user, I want a 5-second countdown before the workout begins and audio beeps on every rep completion.

## 3. Requirements

### 3.1. Input Configuration
- **Total Reps:** Integer (e.g., 50 to 500).
- **Set Size:** Integer (e.g., 5, 10, 15, 20).
- **Work:Rest Ratio:** Slider or Toggle.
  - *Default:* 3:1 (Work 15 mins, Rest 5 mins).
  - *Range:* 1:1 (Easier pacing, longer rest) to 10:1 (Sprint pacing, micro-rest).
- **Rep Type (Optional Context):** Label only (6-Count vs Navy Seal) to adjust default ratio recommendations, but math remains generic.

### 3.2. Calculation Logic
- **Constants:** `TotalSessionTime = 1200 seconds` (20 min).
- **Derived Values:**
  - `NumSets = TotalReps / SetSize` (Round up if partial, but standard BDT uses even sets).
  - `TotalWorkTime = TotalSessionTime * (Ratio / (Ratio + 1))`.
  - `TotalRestTime = TotalSessionTime - TotalWorkTime`.
  - `TimePerRep = TotalWorkTime / TotalReps`.
  - `RestPerSet = TotalRestTime / NumSets` (Assumes a rest period follows every set, including the last, or distributes rest evenly between sets. *Decision: Rest follows every set to keep intervals uniform.*).

### 3.3. Visual Interface
- **Active State (Work):**
  - Full-screen vertical progress bar.
  - **Animation:**
    - Odd Reps (1, 3, 5...): Fills Bottom → Top.
    - Even Reps (2, 4, 6...): Drains Top → Bottom.
  - **Smoothness:** Linear interpolation over `TimePerRep`.
  - **Counter:** Large text showing `Current Rep / Set Reps` and `Current Set / Total Sets`.
- **Rest State:**
  - Screen turns **Solid Green**.
  - Countdown timer for rest duration.
  - **Flashing:** Screen flashes (toggle opacity) during final 3 seconds of rest.

### 3.4. Audio
- **Start:** 5-second initial countdown with "Get Ready" beeps.
- **Rep Complete:** Short "Blip" sound at the exact end of `TimePerRep` (peak or trough of animation).
- **Set Complete:** Distinct "Success" chime.
- **Resume Warning:** 3 "Get Ready" beeps matching the flash.

## 4. Edge Cases
- **Impossible Math:** If `TimePerRep` < 1 second (physically impossible), show a warning.
- **Zero Rest:** If Ratio is set to "Max Work", `RestPerSet` approaches 0. Enforce minimum rest (e.g., 5s) or warn user.
- **Screen Lock:** App must prevent screen sleep during the 20-minute session.

## 5. Success Criteria
- User can complete a 20-minute session with the timer remaining effectively synced to the wall clock (drift < 1s).
- Visual metronome is smooth (60fps) and clearly indicates direction.
